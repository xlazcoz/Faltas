<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Asistencia - CIFP USURBIL</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìä Control de Asistencia</h1>
            <p>CIFP USURBIL - 1DDAW3 Web Aplikazioen Garapena</p>
            <div class="db-status" id="db-status">
                <span class="status-indicator" id="status-indicator">‚óè</span>
                <span id="status-text">Conectando a Firebase...</span>
            </div>
        </header>

        <section class="registro-faltas">
            <h2>Registrar Falta</h2>
            <div class="form-container">
                <div class="form-group">
                    <label for="fecha">Fecha:</label>
                    <input type="date" id="fecha" required>
                </div>
                <div class="form-group">
                    <label for="asignatura">Asignatura:</label>
                    <select id="asignatura" required>
                        <option value="">Seleccionar asignatura</option>
                        <option value="Mar">Markatze Lengoaiak (Mar)</option>
                        <option value="Gar">Garapena (Gar)</option>
                        <option value="BBDD">Datu-baseak (BBDD)</option>
                        <option value="Prog">Programazioa (Prog)</option>
                        <option value="Ingles">Ingeles Teknikoa (Ingles)</option>
                        <option value="Digi">Digitalizazioa (Digi)</option>
                        <option value="Irau">Iraunkortasuna (Irau)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="horas">Horas de falta:</label>
                    <input type="number" id="horas" min="1" max="8" value="2" required>
                </div>
                <button id="btn-registrar" class="btn-primary">Registrar Falta</button>
            </div>
        </section>

        <section class="resumen-asistencia">
            <h2>Resumen de Asistencia</h2>
            <div class="filtros">
                <button class="btn-filter active" data-filter="all">Todas</button>
                <button class="btn-filter" data-filter="warning">Advertencias</button>
                <button class="btn-filter" data-filter="danger">Peligro</button>
            </div>
            <div id="tabla-resumen" class="tabla-container">
                <!-- La tabla se generar√° din√°micamente -->
            </div>
        </section>

        <section class="estadisticas">
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Total Horas Registradas</h3>
                    <p id="total-horas">0</p>
                </div>
                <div class="stat-card">
                    <h3>Total Faltas</h3>
                    <p id="total-faltas">0</p>
                </div>
                <div class="stat-card">
                    <h3>Asignaturas en Riesgo</h3>
                    <p id="asignaturas-riesgo">0</p>
                </div>
                <div class="stat-card">
                    <h3>Registros en Cloud</h3>
                    <p id="total-registros">0</p>
                </div>
            </div>
        </section>

        <section class="lista-faltas">
            <h2>Historial de Faltas</h2>
            <div class="acciones-lista">
                <button id="btn-exportar" class="btn-secondary">Exportar a JSON</button>
                <button id="btn-limpiar" class="btn-secondary">Limpiar Base de Datos</button>
            </div>
            <div id="lista-faltas-container">
                <!-- Lista de faltas se generar√° din√°micamente -->
            </div>
        </section>
    </div>

    <script src="script.js"></script>
</body>
</html>